{"remainingRequest":"/srv/repos/bodega_central/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/srv/repos/bodega_central/frontend/src/components/bodega/Salida.vue?vue&type=style&index=0&id=3dd9ca42&prod&scoped=true&lang=css&","dependencies":[{"path":"/srv/repos/bodega_central/frontend/src/components/bodega/Salida.vue","mtime":1723474625109},{"path":"/srv/repos/bodega_central/frontend/node_modules/css-loader/dist/cjs.js","mtime":1676473588380},{"path":"/srv/repos/bodega_central/frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1676473588036},{"path":"/srv/repos/bodega_central/frontend/node_modules/postcss-loader/src/index.js","mtime":1676473588672},{"path":"/srv/repos/bodega_central/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1676473588660},{"path":"/srv/repos/bodega_central/frontend/node_modules/vue-loader/lib/index.js","mtime":1676473588036}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5hcnQtc2VsZWNjaW9uYWRvIHsKICBjb2xvcjogIzE1NTcyNCAhaW1wb3J0YW50OwogIGJhY2tncm91bmQtY29sb3I6ICNkNGVkZGEgIWltcG9ydGFudDsKICBib3JkZXItY29sb3I6ICNjM2U2Y2IgIWltcG9ydGFudDsKfQoKLmFydC1zZWxlY2Npb25hZG8gdGR7CiAgY29sb3I6ICMxNTU3MjQgIWltcG9ydGFudDsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZDRlZGRhICFpbXBvcnRhbnQ7CiAgYm9yZGVyLWNvbG9yOiAjYzNlNmNiICFpbXBvcnRhbnQ7Cn0K"},{"version":3,"sources":["Salida.vue"],"names":[],"mappings":";AA6NA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Salida.vue","sourceRoot":"src/components/bodega","sourcesContent":["<template>\n  <div class=\"container-fluid\">\n    <loader-component :cargando_pagina=\"cargando_pagina\"/>\n    <div class=\"row\">\n      <div class=\"col-12 text-md-left text-center\">\n        <h3><i class=\"fas fa-fw fa-truck mr-2\"></i>SALIDA DE BODEGA</h3>\n      </div>\n    </div>\n\n    <!-- <div class=\"row justify-content-center mt-4\">\n      <div class=\"col-xl-6 col-md-10 col-12\">\n        Filtrar por bodega:\n        <b-form-select @change=\"listarOrdenesTraspaso();\" v-model=\"filtro_bodega\" class=\"mb-3\" :options=\"sucursales\" :value-field=\"'suc_id'\" :text-field=\"'suc_nombre'\">\n          <b-form-select-option value=\"''\">Todas</b-form-select-option>\n        </b-form-select>\n      </div>\n    </div>\n    <div class=\"row justify-content-center mt-4 px-3\">\n      <div class=\"col-xl-8 col-md-12 col-12 border p-0\">\n        <table class=\"table table-striped text-center table-scroll mb-0\">\n          <thead>\n            <tr>\n              <th scope=\"col\">INGRESO</th>\n              <th scope=\"col\">T.DOC</th>\n              <th scope=\"col\">DOC</th>\n              <th scope=\"col\">PESO</th>\n              <th scope=\"col\">DESP. ESTIMADO</th>\n              <th scope=\"col\" class=\"alert-dark\">ESTANTE</th>\n              <th scope=\"col\" class=\"alert-dark\">SECCION</th>\n              <th scope=\"col\" class=\"alert-dark\">NUMERO</th>\n              <th scope=\"col\" class=\"alert-dark\">-</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"(art, index) in articulos\" :key=\"'esp'+index\" :class=\"{'art-seleccionado': art.seleccionado}\">\n              <td class=\"p-1\">{{ \n                art.art_fecha_ingreso.split(' ')[0].split('-')[2]+'-'+\n                art.art_fecha_ingreso.split(' ')[0].split('-')[1]+'-'+\n                art.art_fecha_ingreso.split(' ')[0].split('-')[0]+' '+\n                art.art_fecha_ingreso.split(' ')[1].split(':')[0]+':'+\n                art.art_fecha_ingreso.split(' ')[1].split(':')[1]\n                }}</td>\n              <td class=\"p-1\">{{art.art_tipo_documento}}</td>\n              <td class=\"p-1\">{{art.art_documento}}</td>\n              <td class=\"p-1\">{{art.art_peso}}</td>\n              <td class=\"p-1\" :class=\"{'alert-danger':fechaPasada(art.art_despacho_estimado)}\">{{\n                art.art_despacho_estimado.split('-')[2]+'-'+\n                art.art_despacho_estimado.split('-')[1]+'-'+\n                art.art_despacho_estimado.split('-')[0]\n                }}</td>\n              <td class=\"p-1 alert-dark\">{{art.esp_estante}}</td>\n              <td class=\"p-1 alert-dark\">{{art.esp_seccion}}</td>\n              <td class=\"p-1 alert-dark\">{{art.esp_numero }}</td>\n              <td class=\"p-1 alert-dark\">\n                <b-form-checkbox :id=\"'checkbox-'+index\" v-model=\"art.seleccionado\" :name=\"'checkbox-'+index\" :value=\"true\" :unchecked-value=\"false\"></b-form-checkbox>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div> -->\n\n    <div class=\"row px-2\">\n      <div class=\"card w-100\">\n        <div class=\"card-header\">\n          <div class=\"row justify-content-center mt-4\">\n            <div class=\"col-6 text-rigth\">\n              Filtrar por bodega:\n              <b-form-select @change=\"listarOrdenesTraspaso();\" v-model=\"filtro_bodega\" class=\"mb-3\" :options=\"sucursales\" :value-field=\"'suc_id'\" :text-field=\"'suc_nombre'\">\n                <b-form-select-option value=\"''\">Todas</b-form-select-option>\n              </b-form-select>\n            </div>\n          </div>\n        </div>\n        <div class=\"card-content\">\n          <b-table v-if=\"ordenes_traspaso.length > 0\" striped hover :items=\"ordenes_traspaso\" :fields=\"columnas_ordenes\" :thead-tr-class=\"'text-center align-middle bg-dark text-white'\">\n            <!-- <template v-slot:cell(art_cantidad)=\"data\">\n              <span>{{ data.value+' '+data.item.art_unidad_medida.toLowerCase()}}</span>\n            </template> -->\n            <template v-slot:cell(ing_rack)=\"data\">\n              <span>{{ data.item.esp_seccion+'-'+data.item.esp_estante+'-'+data.item.esp_numero }}</span>\n            </template>\n            <template v-slot:cell(opcion)=\"data\">\n              <b-button size=\"sm\" variant=\"primary\" @click=\"listarOrdenTraspaso(data.item.documento); orden_seleccionada=data.item; modal_ver_orden=true;\">VER</b-button>\n            </template>\n          </b-table>\n          <b-alert v-if=\"ordenes_traspaso.length == 0\" show variant=\"warning\" class=\"text-center m-3\">Sin datos para listar.</b-alert>\n        </div>\n      </div>\n    </div>\n\n    <b-modal title=\"Orden de traspaso\" v-model=\"modal_ver_orden\" size=\"lg\">\n      <h6>Orden de traspaso: {{ orden_seleccionada.documento }}</h6>\n      <h6>Orden de compra: {{ orden_seleccionada.detalle.ocompra }}</h6>\n      <h6>Fecha: {{ orden_seleccionada.fecha }}</h6>\n      <h6>Bodega: {{ orden_seleccionada.detalle.bod }}</h6>\n      <h6>Observacion: {{ orden_seleccionada.detalle.mensaje }}</h6>\n      <h6>Articulos:</h6>\n      <b-table striped hover :items=\"orden_seleccionada.detalle.codigos\" :fields=\"columnas_articulos_orden\" :thead-tr-class=\"'text-center align-middle bg-dark text-white'\">\n      </b-table>\n      <!-- {{ orden_seleccionada }} -->\n    </b-modal>\n\n  </div>\n</template>\n\n<script>\nexport default {\n  data(){\n    return{\n      cargando_pagina   : false,\n      sucursales        : [],\n      salida            : {sucursal:'', articulos:''},\n      articulos         : [],\n      tipos_documentos  : [\n        {value:33, text:'FACTURA'}, \n        {value:39, text:'BOLETA'}, \n        {value:52, text:'GUIA DESPACHO'}\n      ],\n\n      filtro_bodega     : '',\n      ordenes_traspaso  :[],\n      columnas_ordenes  : [\n        {key: 'documento' , label: 'Documento'      , sortable: true  , tdClass:'p-1 text-center', thClass:'p-1'},\n        {key: 'fecha'     , label: 'Fecha'          , sortable: true  , tdClass:'p-1 text-center', thClass:'p-1'},\n        {key: 'bod'       , label: 'Bodega'         , sortable: true  , tdClass:'p-1 text-center', thClass:'p-1'},\n        {key: 'nombod'    , label: 'Nombre Bodega'  , sortable: true  , tdClass:'p-1 text-center', thClass:'p-1'},\n        {key: 'total'     , label: 'Total'          , sortable: true  , tdClass:'p-1 text-center', thClass:'p-1'},\n        {key: 'opcion'    , label: 'Opcion'                           , tdClass:'p-1 text-center', thClass:'p-1'},\n      ],\n      columnas_articulos_orden: [\n        {key: 'codigo'  , label: 'SKU'        , sortable: true  , tdClass:'p-1 text-center', thClass:'p-1'},\n        {key: 'nomart'  , label: 'Nombre'     , sortable: true  , tdClass:'p-1 text-center', thClass:'p-1'},\n        {key: 'umed'    , label: 'U. Medida'  , sortable: true  , tdClass:'p-1 text-center', thClass:'p-1'},\n        {key: 'cant'    , label: 'Cantidad'   , sortable: true  , tdClass:'p-1 text-center', thClass:'p-1'},\n      ],\n      orden_seleccionada: '',\n      modal_ver_orden   : false\n    }\n  },\n  mounted(){\n    this.listarSucursales();\n    this.listarOrdenesTraspaso();\n  },\n  methods:{\n    listarSucursales(){\n      this.cargando_pagina = true;\n      axios.post(base_url+'bodega/listarSucursales').then( resp => {\n        this.sucursales       = resp.data;\n        this.cargando_pagina  = false;\n      }).catch(error =>{\n        console.log(error);\n        this.cargando_pagina = false;\n      });\n    },\n\n    listarProductosSucursal(){\n      this.cargando_pagina = true;\n      const datos = new URLSearchParams();\n      datos.append('id_sucursal', this.salida.sucursal);\n      axios.post(base_url+'bodega/listarProductosSucursal', datos).then( resp => {\n        this.articulos        = resp.data;\n        this.cargando_pagina  = false;\n      }).catch(error =>{\n        console.log(error);\n        this.cargando_pagina = false;\n      });\n    },\n\n    listarOrdenesTraspaso(){\n      this.cargando_pagina = true;\n      const datos = new URLSearchParams();\n      datos.append('bodega', this.filtro_bodega);\n      axios.post(base_url+'bodega/listarOrdenesTraspaso', datos).then( resp => {\n        if(resp.data.status == 200){\n          this.ordenes_traspaso = resp.data.sotrasp;\n        }\n        else{\n          alert('Error al listar ordenes de traspaso.');\n        }\n        this.cargando_pagina  = false;\n      }).catch(error =>{\n        console.log(error);\n        this.cargando_pagina = false;\n      });\n    },\n\n    listarOrdenTraspaso(id_orden){\n      this.cargando_pagina = true;\n      const datos = new URLSearchParams();\n      datos.append('id_orden', id_orden);\n      axios.post(base_url+'bodega/listarOrdenTraspaso', datos).then( resp => {\n        if(resp.data.status == 200){\n          this.orden_seleccionada.detalle = resp.data;\n        }\n        else{\n          alert('Error al listar ordenes de traspaso.');\n        }\n        this.cargando_pagina  = false;\n      }).catch(error =>{\n        console.log(error);\n        this.cargando_pagina = false;\n      });\n    },\n\n    fechaPasada(fecha){\n      const fecha_estimada = new Date(fecha);\n      const fecha_actual   = new Date();\n      if(fecha_estimada < fecha_actual){\n        return true;\n      }\n      else {\n        return false;\n      }\n    }\n  }\n}\n\n</script>\n\n<style scoped>\n.art-seleccionado {\n  color: #155724 !important;\n  background-color: #d4edda !important;\n  border-color: #c3e6cb !important;\n}\n\n.art-seleccionado td{\n  color: #155724 !important;\n  background-color: #d4edda !important;\n  border-color: #c3e6cb !important;\n}\n</style>\n"]}]}