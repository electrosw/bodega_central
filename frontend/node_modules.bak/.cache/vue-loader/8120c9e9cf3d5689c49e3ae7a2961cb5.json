{"remainingRequest":"/srv/repos/bodega_central/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/srv/repos/bodega_central/frontend/src/components/bodega/Bodega.vue?vue&type=style&index=0&id=3242d82e&prod&scoped=true&lang=css&","dependencies":[{"path":"/srv/repos/bodega_central/frontend/src/components/bodega/Bodega.vue","mtime":1720027660465},{"path":"/srv/repos/bodega_central/frontend/node_modules/css-loader/dist/cjs.js","mtime":1676473588380},{"path":"/srv/repos/bodega_central/frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1676473588036},{"path":"/srv/repos/bodega_central/frontend/node_modules/postcss-loader/src/index.js","mtime":1676473588672},{"path":"/srv/repos/bodega_central/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1676473588660},{"path":"/srv/repos/bodega_central/frontend/node_modules/vue-loader/lib/index.js","mtime":1676473588036}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5lc3BhY2lvIHsKICBjdXJzb3I6cG9pbnRlcjsKfQouZXNwYWNpbzpob3ZlciB7CiAgY29sb3I6ICMxYjFlMjE7CiAgYmFja2dyb3VuZC1jb2xvcjogI2Q2ZDhkOTsKICBib3JkZXItY29sb3I6ICNjNmM4Y2E7Cn0KCi5lc3BhY2lvX29jdXBhZG8gewogIC8qIG9wYWNpdHk6IDAuNTsgKi8KICBib3JkZXItd2lkdGg6IDJweCAhaW1wb3J0YW50OwogIGJvcmRlci1jb2xvcjogI2RjMzU0NSAhaW1wb3J0YW50Owp9CgoucGFnaW5hIHsKICB3aWR0aDogMTAwJSAhaW1wb3J0YW50OwogIGhlaWdodDogY2FsYygxMDB2aCAtIDEzNnB4KSAhaW1wb3J0YW50OwogIG92ZXJmbG93OiBhdXRvICFpbXBvcnRhbnQ7Cn0KCi5wYWdpbmEyIHsKICBtaW4td2lkdGg6IDE1NTBweCAhaW1wb3J0YW50Owp9Cgo="},{"version":3,"sources":["Bodega.vue"],"names":[],"mappings":";AA2LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"Bodega.vue","sourceRoot":"src/components/bodega","sourcesContent":["<template>\n  <div class=\"pagina\">\n  <loader-component :cargando_pagina=\"cargando_pagina\"/>\n  <div class=\"container-fluid p-1 pagina2\">\n    \n    <div class=\"row\">\n      <div class=\"col-12 text-md-left text-center\">\n        <h3><i class=\"fas fa-fw fa-warehouse mr-2\"></i>ESTADO BODEGA</h3>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-12 text-md-left text-center\">\n        <b-card style=\"display:flex;\">\n          <h6><strong>CAPACIDADES:</strong></h6>\n          <div style=\"float:left;\" class=\"mr-3\">DISPONIBLES:</div>\n          <div style=\"float:left;\"><b-card no-body class=\"text-center alert-primary\" style=\"width:100px;\">2.000 Kg</b-card></div>\n          <div style=\"float:left;\" class=\"ml-3\"><b-card no-body class=\"text-center alert-warning\" style=\"width:100px;\">1.200 Kg</b-card></div>\n          <div style=\"float:left;\" class=\"ml-3\"><b-card no-body class=\"text-center alert-info\" style=\"width:100px;\">200 Kg</b-card></div>\n          <div style=\"float:left;\" class=\"ml-5 mr-3\">OCUPADOS:</div>\n          <div style=\"float:left;\"><b-card no-body class=\"text-center alert-primary text-danger border-danger espacio_ocupado\" style=\"width:100px;\">2.000 Kg</b-card></div>\n          <div style=\"float:left;\" class=\"ml-3\"><b-card no-body class=\"text-center alert-warning text-danger border-danger espacio_ocupado\" style=\"width:100px;\">1.200 Kg</b-card></div>\n          <div style=\"float:left;\" class=\"ml-3\"><b-card no-body class=\"text-center alert-info text-danger border-danger espacio_ocupado\" style=\"width:100px;\">200 Kg</b-card></div>\n        </b-card>\n      </div>\n    </div>\n\n\n    <div class=\"row justify-content-between mt-2 pt-2 pb-2 bg-secondary\">\n      <div v-for=\"(estante,index1) in estantes\" :key=\"'est'+index1\" :class=\"{\n        'col-12'      : estante.est_capacidad == 21, \n        'col-12 pr-5' : estante.est_id == 17 || estante.est_id == 19, \n        'col-6'       : estante.est_capacidad < 10,\n        /* 'col-7'       : estante.est_id == 15 */\n        }\">\n        <b-card no-body class=\"p-0 text-center\" header-class=\"p-1\" :class=\"{\n          'w-25'    : estante.est_capacidad == 3, \n          'ml-auto' : estante.est_id == 7  || estante.est_id == 4, \n          'w-50'    : estante.est_id == 17 || estante.est_id == 19\n          }\">\n          <template #header>\n            <strong>ESTANTE {{estante.est_id}}</strong>\n          </template>\n          <div class=\"container-fluid\">\n            <div class=\"row p-1 justify-content-betwen\">\n              <div class=\"col p-0\" v-for=\"(seccion,index2) in estante.secciones\" :key=\"'sec'+index2\">\n                <b-card no-body class=\"p-1\">\n                  Sec. {{seccion.sec_id}}\n                  <b-card v-for=\"(espacio,index3) in seccion.espacios\" @click=\"modal_detalle=true; listarArticulosEspacio(espacio.esp_id);\" no-body :key=\"'esp'+index3\" class=\"p-0 espacio\" \n                  :class=\"{\n                    'alert-primary' : espacio.esp_peso == 2000, \n                    'alert-warning' : espacio.esp_peso == 1200, \n                    'alert-info'    : espacio.esp_peso == 200, \n                    'text-danger border-danger espacio_ocupado' : espacio.esp_ocupado\n                    }\">\n                    <strong v-if=\"espacio.esp_ocupado\" class=\"\">{{ estante.est_id }}-{{seccion.sec_id}}-{{espacio.esp_numero}}</strong>\n                    <span v-else>{{ estante.est_id }}-{{seccion.sec_id}}-{{espacio.esp_numero}}</span>\n                    <!-- {{ espacio.esp_ancho/100+'x'+espacio.esp_alto/100+'x'+espacio.esp_fondo/100}} mt <br>\n                    {{ espacio.esp_peso }} kg -->\n\n                  </b-card>\n                </b-card>\n              </div>\n            </div>\n          </div>\n        </b-card>\n        \n      </div>\n    </div>\n\n    <b-modal v-model=\"modal_detalle\" size=\"lg\" title=\"DETALLES DE RACK\" hide-footer no-close-on-backdrop :scrollable=\"false\">\n      <div class=\"row\">\n        {{ espacio_actual }}\n        <b-table striped hover :items=\"articulos_espacio\" :fields=\"columnas_articulos\" :thead-tr-class=\"'text-center align-middle bg-dark text-white'\">\n          <template v-slot:cell(cant_recibida)=\"data\">\n            <b-form-input size=\"sm\" type=\"text\" v-model=\"data.item.cant_recibida\" :class=\"{'is-valid':validaNumero(data.item.cant_recibida) && data.item.cant_recibida != 0, 'is-invalid':!validaNumero(data.item.cant_recibida) && data.item.cant_recibida != 0}\"></b-form-input>\n          </template>\n          <template v-slot:cell(estantes_usar)=\"data\">\n            <b-form-input size=\"sm\" type=\"text\" v-model=\"data.item.estantes_usar\" @change=\"data.item.estantes = cambioEstantes(data.item.estantes, data.item.estantes_usar);\" :disabled=\"!validaNumero(data.item.cant_recibida) || data.item.cant_recibida == 0\" :class=\"{'is-valid':validaNumero(data.item.estantes_usar) && data.item.estantes_usar !=0 && data.item.cant_recibida != 0, 'is-invalid':(!validaNumero(data.item.estantes_usar) || data.item.estantes_usar == 0) && data.item.cant_recibida != 0}\"></b-form-input>\n          </template>\n          <template v-slot:cell(estantes)=\"data\">\n            <!-- <b-form-select size=\"sm\" v-model=\"data.item.estante\" :disabled=\"!validaNumero(data.item.cant_recibida) || data.item.cant_recibida == 0\" :class=\"{'is-invalid': data.item.estante == 0 && validaNumero(data.item.cant_recibida) && data.item.cant_recibida != 0, 'is-valid': data.item.estante != 0 && validaNumero(data.item.cant_recibida)}\">\n              <b-form-select-option v-for=\"espacio in espacios_disponibles\" :key=\"espacio.esp_id\" :value=\"espacio.esp_id\">\n                {{ espacio.esp_estante+'-'+espacio.esp_seccion+'-'+espacio.esp_numero+' ('+espacio.esp_peso+'kg)' }}\n              </b-form-select-option>\n            </b-form-select> -->\n            <div style=\"width: 350px!important;\" class=\"container-fluid\">\n              <div class=\"row p-0\" v-for=\"(estante,index) in data.item.estantes\" :key=\"'idx'+index\">\n                <div class=\"col-4 p-0\">\n                  <b-form-input size=\"sm\" type=\"text\" v-model=\"estante.cantidad\" :disabled=\"!validaNumero(data.item.cant_recibida) || data.item.cant_recibida == 0\" :class=\"{'is-valid':validaNumero(estante.cantidad) && estante.cantidad != 0 && data.item.cant_recibida !=0, 'is-invalid':(!validaNumero(estante.cantidad) || estante.cantidad == 0 || !validaCantidadRecibida(data.item)) && data.item.cant_recibida != 0}\"></b-form-input>\n                </div>\n                <div class=\"col-8 p-0\">\n                  <v-select style=\"width: 100%!important;\" class=\"form-control form-control-sm p-0 h-auto\" :reduce=\"(espacio) => espacio.esp_id\" label=\"esp_nombre\" v-model=\"estante.estante\" :clearable=\"true\" :closeOnSelect=\"true\" :options=\"espacios_disponibles\" :disabled=\"!validaNumero(data.item.cant_recibida) || data.item.cant_recibida == 0\" :class=\"{'is-invalid': estante.estante == 0 && validaNumero(data.item.cant_recibida) && data.item.cant_recibida != 0, 'is-valid': estante.estante != 0 && validaNumero(data.item.cant_recibida) && data.item.cant_recibida != 0}\">\n                    <template v-slot:no-options=\"{ search, searching }\">\n                      <template v-if=\"searching\">\n                        SIN RESULTADOS PARA <em>{{ search }}</em>.\n                      </template>\n                      <em style=\"opacity: 0.5;\" v-else>SIN OPCIONES PARA MOSTRAR.</em>\n                    </template>\n                  </v-select>\n                </div>\n              </div>\n            </div>\n          </template>\n        </b-table>\n      </div>\n      <div class=\"row mt-3 pt-3 border-top\">\n        <div class=\"col text-center\">\n          <b-button @click=\"modal_detalle=false;\" variant=\"primary\" size=\"sm\">CERRAR</b-button>\n        </div>\n      </div>\n\n    </b-modal>\n\n  </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data(){\n    return{\n      meses : [\n        {value:1, text:'ENERO'},\n        {value:2, text:'FEBRERO'},\n        {value:3, text:'MARZO'},\n        {value:4, text:'ABRIL'},\n        {value:5, text:'MAYO'},\n        {value:6, text:'JUNIO'},\n        {value:7, text:'JULIO'},\n        {value:8, text:'AGOSTO'},\n        {value:9, text:'SEPTIEMBRE'},\n        {value:10, text:'OCTUBRE'},\n        {value:11, text:'NOVIEMBRE'},\n        {value:12, text:'DICIEMBRE'}\n      ],\n      modal_detalle     : false,\n      cargando_pagina   : false,\n      estantes          : [],\n      articulos_espacio : [],\n      columnas_articulos    : [\n        {key: 'art_codigo'            , label: 'SKU'                , sortable: true  , tdClass:'p-1', thClass:'p-1'},\n        {key: 'art_cantidad'          , label: 'Articulo'           , sortable: true  , tdClass:'p-1', thClass:'p-1'},\n        {key: 'art_unidad_medida'     , label: 'U. Medida'          , sortable: true  , tdClass:'p-1 text-center', thClass:'p-1'},\n        {key: 'art_orden_compra'      , label: 'Cantidad comprada'  , sortable: true  , tdClass:'p-1 text-center', thClass:'p-1'},\n        {key: 'art_sucursal'          , label: 'Cantidad recibida'  , sortable: true  , tdClass:'p-1', thClass:'p-1'},\n        {key: 'art_documento'         , label: 'Estantes a usar'    , sortable: true  , tdClass:'p-1', thClass:'p-1'},\n        {key: 'art_tipo_documento'    , label: 'Cantidad x Estante' , sortable: true  , tdClass:'p-1', thClass:'p-1'},\n        {key: 'art_fecha_ingreso'     , label: 'Cantidad x Estante' , sortable: true  , tdClass:'p-1', thClass:'p-1'},\n        {key: 'art_despacho_estimado' , label: 'Cantidad x Estante' , sortable: true  , tdClass:'p-1', thClass:'p-1'}\n      ],\n    }\n  },\n  mounted(){\n    this.listarEstantes();\n  },\n  methods:{\n    listarEstantes(){\n      this.cargando_pagina = true;\n      axios.post(base_url+'bodega/listarEstantes').then( resp => {\n        this.estantes = resp.data.estantes;\n        this.cargando_pagina  = false;\n        console.log(this.estantes);\n      }).catch(error =>{\n        console.log(error);\n        this.cargando_pagina = false;\n      });\n    },\n\n    listarArticulosEspacio(id_espacio){\n      this.cargando_pagina = true;\n      const datos = new URLSearchParams();\n      datos.append('id_espacio', id_espacio);\n      axios.post(base_url+'bodega/listarArticulosEspacio', datos).then( resp => {\n        console.log(resp.data);\n        this.articulos_espacio = resp.data;\n        this.cargando_pagina   = false;\n      }).catch(error =>{\n        console.log(error);\n        this.cargando_pagina = false;\n      });\n    }\n  }\n}\n\n</script>\n\n<style scoped>\n.espacio {\n  cursor:pointer;\n}\n.espacio:hover {\n  color: #1b1e21;\n  background-color: #d6d8d9;\n  border-color: #c6c8ca;\n}\n\n.espacio_ocupado {\n  /* opacity: 0.5; */\n  border-width: 2px !important;\n  border-color: #dc3545 !important;\n}\n\n.pagina {\n  width: 100% !important;\n  height: calc(100vh - 136px) !important;\n  overflow: auto !important;\n}\n\n.pagina2 {\n  min-width: 1550px !important;\n}\n\n</style>\n"]}]}