{"remainingRequest":"/srv/repos/bodega_central/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/srv/repos/bodega_central/frontend/src/App.vue?vue&type=style&index=1&id=9e6e0b12&prod&scoped=true&lang=css&","dependencies":[{"path":"/srv/repos/bodega_central/frontend/src/App.vue","mtime":1721941990858},{"path":"/srv/repos/bodega_central/frontend/node_modules/css-loader/dist/cjs.js","mtime":1676473588380},{"path":"/srv/repos/bodega_central/frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1676473588036},{"path":"/srv/repos/bodega_central/frontend/node_modules/postcss-loader/src/index.js","mtime":1676473588672},{"path":"/srv/repos/bodega_central/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1676473588660},{"path":"/srv/repos/bodega_central/frontend/node_modules/vue-loader/lib/index.js","mtime":1676473588036}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CkBtZWRpYSAobWF4LXdpZHRoOiA5OTFweCkgewogIC5jb250ZW50LXdyYXBwZXJ7CiAgICBtYXJnaW4tbGVmdDogYXV0byFpbXBvcnRhbnQ7CiAgfQoKICAudGV4dG9fYmFycmF7CiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2sgIWltcG9ydGFudDsKICB9CgogICNleGFtcGxlQWNjb3JkaW9uewogICAgd2lkdGg6MjUwcHggIWltcG9ydGFudDsKICB9CgogIC5pdGVtX2xhdGVyYWx7CiAgICAgIHdpZHRoOjI1MHB4ICFpbXBvcnRhbnQ7CiAgfQp9CgovKi5tb2RhbAp7CiAgYmFja2dyb3VuZDogYmxhY2sgIWltcG9ydGFudDsKfSovCg=="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";AA0WA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <div id=\"app\">\n    <loader-component :cargando_pagina=\"cargando_pagina\"/>\n    <div class=\"fixed-nav sticky-footer bg-dark sidenav-toggled\" id=\"page-top\">\n      <nav class=\"navbar navbar-expand-lg navbar-dark bg-dark fixed-top pl-2\" id=\"mainNav\">\n        <a class=\"navbar-brand\" href=\"<?=base_url?>\"><i class=\"fas fa-warehouse fa-fw fa-lg mr-3 ml-1\"></i>BODEGA CENTRAL</a>\n        <button class=\"navbar-toggler navbar-toggler-right\" type=\"button\" @click=\"muestraBarraSuperior()\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n          <span class=\"navbar-toggler-icon\"></span>\n        </button>\n        <div class=\"collapse navbar-collapse\" id=\"navbarResponsive\">\n          <ul v-if=\"menu!=[]\" class=\"navbar-nav navbar-sidenav\" id=\"exampleAccordion\" style=\"width: 55px;\">\n\n            <li  v-for=\"(item, index) in menu\" v-bind:key=\"index\" class=\"nav-item item_lateral\" :id=\"'item_'+item.nombre\" style=\"width: 55px;\" v-b-tooltip.hover.right :title=\"item.nombre\" @click=\"cambiaVista(item.nombre)\">\n              <a class=\"nav-link\" style=\"cursor:pointer;\">\n                <span v-html=\"item.icono\"></span>\n                <span class=\"nav-link-text texto_barra\" v-text=\"item.nombre\" style=\"display:none;\"></span>\n              </a>\n            </li>\n\n            <!-- <li class=\"nav-item item_lateral\" :id=\"'item_'+index\" style=\"width: 55px;\" v-b-tooltip.hover.right :title=\"'Cambio de clave'\" @click=\"modal_cambiar_clave=true; ocultaMenu();\">\n              <a class=\"nav-link\" style=\"cursor:pointer;\">\n                <i class=\"fas fa-key fa-fw mr-2\"></i>\n                <span class=\"nav-link-text texto_barra\" v-text=\"'Cambio de clave'\" style=\"display:none;\"></span>\n              </a>\n            </li> -->\n\n            <!-- FIN DEL MENU LATERAL -->\n          </ul>\n          <ul class=\"navbar-nav sidenav-toggler\">\n            <li class=\"nav-item item_lateral\" style=\"width: 55px;\">\n              <a v-if=\"barra\" @click=\"ocultaBarra();\" class=\"nav-link text-center\">\n                <i class=\"fas fa-angle-left\"></i>\n              </a>\n              <a v-else @click=\"muestraBarra();\" class=\"nav-link text-center\">\n                <i class=\"fas fa-angle-right\"></i>\n              </a>\n            </li>\n          </ul>\n          <!-- <ul class=\"navbar-nav ml-auto\">\n            <li class=\"nav-item\">\n              <a @click=\"modal_cerrar_sesion=true;\" id=\"logout-btn\" class=\"nav-link\">\n              <i class=\"fas fa-sign-out-alt\"></i> CERRAR SESIÓN</a>\n            </li>\n          </ul> -->\n        </div>\n      </nav>\n    <div class=\"content-wrapper\" style=\"margin-left: 55px; margin-bottom: 55px; padding-top: 55px;\">\n      <!-- <div class=\"container-fluid pt-3\">\n        <nav aria-label=\"breadcrumb\">\n            <ol class=\"breadcrumb\">\n                <li class=\"breadcrumb-item  ml-2\"><a href=\"<?=base_url?>\">INICIO</a></li>\n                <li class=\"breadcrumb-item active\"><span v-text=\"nom_empresa\"></span></li>\n                <li class=\"breadcrumb-item active\" v-if=\"num_empresa == id_electrocom\"><span v-text=\"'/ '+nom_bodega\"></span></li>\n            </ol>\n        </nav> \n      </div> -->\n      \n      <!-- DIV DINAMICO QUE CONTIENE EL CUERPO DE LA PAGINA -->\n      <!-- MENU ADMINISTRADOR -->\n      <div class=\"mt-4\">\n        <ingreso-bodega-component       v-if=\"menu[0].visible\"/>\n        <salida-bodega-component        v-if=\"menu[1].visible\"/>\n        <bodega-component               v-if=\"menu[2].visible\"/>\n        <informes-bodega-component      v-if=\"menu[3].visible\"/>\n\n      </div>\n\n    </div>\n      <!-- Scroll to Top -->\n      <a class=\"scroll-to-top rounded\" href=\"#page-top\" style=\"margin-bottom: 55px;\">\n        <i class=\"fas fa-angle-up\"></i>\n      </a>\n    </div>\n\n    <!--<b-modal :content-class=\"'border-0 rounded-0 mb-5'\" v-model=\"modal_selecciona_local\" title=\"SELECCIONE EMPRESA/LOCAL\" size=\"lg\" hide-footer hide-header-close no-close-on-esc no-close-on-backdrop centered>\n      <label>EMPRESA</label>\n      <select v-model=\"empresa_selecc\" class=\"form-control\">\n        <option :key=\"index\" v-for=\"(empresa, index) in empresas\" :value=\"empresa\" v-text=\"empresa.emp_nombre\"></option>\n      </select>\n      <div v-if=\"empresa_selecc.emp_id == id_electrocom\">\n        <label class=\"mt-3\">BODEGA</label>\n        <select v-model=\"bodega_selecc\" class=\"form-control\">\n          <option :key=\"index\" v-for=\"(bodega, index) in bodegas\" :value=\"bodega\" v-text=\"bodega.bod_nombre\"></option>\n        </select>\n      </div>\n      <div class=\"row justify-content-center mt-4 mb-2\">\n        <button class=\"btn btn-success col-4\" @click=\"setEmpresa()\"><i class=\"fas fa-sign-in-alt mr-2\"></i>ACEPTAR</button>\n      </div>\n     \n    </b-modal>-->\n\n    <b-modal v-model=\"modal_cambiar_clave\" title=\"CAMBIO DE CLAVE\" hide-footer no-close-on-backdrop no-close-on-esc>\n      <div class=\"row\">\n        <div class=\"col-2 pr-0\">\n          <h6 class=\"text-left\">NOMBRE</h6>\n        </div>\n        <div class=\"col-1 p-0\">\n          <h6 class=\"text-center font-weight-light\">:</h6>\n        </div>\n        <div class=\"col-9 pl-0\">\n          <h6 class=\"text-left font-weight-light text-uppercase\">{{usuario.nombres+' '+usuario.apellidos}}</h6>\n        </div>\n      </div>\n      <div class=\"row mb-3 pb-2 border-bottom\">\n        <div class=\"col-2 pr-0\">\n          <h6 class=\"text-left\">RUT</h6>\n        </div>\n        <div class=\"col-1 p-0\">\n          <h6 class=\"text-center font-weight-light\">:</h6>\n        </div>\n        <div class=\"col-9 pl-0\">\n          <h6 class=\"text-left font-weight-light\" v-if=\"usuario.rut!=''\">{{formateaRut(usuario.rut+'-'+usuario.dv)}}</h6>\n        </div>\n      </div>\n\n      <h6 class=\"text-left font-weight-bold\">INGRESA TU CLAVE ACTUAL</h6>\n      <div class=\"input-group mb-3\">\n        <div class=\"input-group-prepend\">\n          <span class=\"input-group-text\"><i class=\"fas fa-lock fa-fw\"></i></span>\n        </div>\n        <b-input v-model=\"usuario.clave_actual\" type=\"password\" class=\"form-control\" placeholder=\"Clave actual\"/>\n      </div>\n\n      <h6 class=\"text-left font-weight-bold mt-4\">NUEVA CLAVE</h6>\n      <div class=\"input-group mb-3\">\n        <div class=\"input-group-prepend\">\n          <span class=\"input-group-text\"><i class=\"fas fa-lock fa-fw\"></i></span>\n        </div>\n        <b-input v-model=\"usuario.clave_nueva1\" type=\"password\" class=\"form-control\" placeholder=\"Ingresa una clave de seguridad\" :state=\"validaClave(usuario.clave_nueva1)\"/>\n      </div>\n      <div class=\"input-group mb-3\">\n        <div class=\"input-group-prepend\">\n          <span class=\"input-group-text\"><i class=\"fas fa-lock fa-fw\"></i></span>\n        </div>\n        <b-input v-model=\"usuario.clave_nueva2\" :disabled=\"!validaClave(usuario.clave_nueva1)\" type=\"password\" class=\"form-control\" placeholder=\"Reingresa tu nueva clave\" :state=\"validaClave(usuario.clave_nueva1) && usuario.clave_nueva1==usuario.clave_nueva2\"/>\n      </div>\n      <h6 class=\"text-center font-weight-bold mt-2\"><i class=\"fas fa-exclamation-circle fa-fw\"></i> <span class=\"font-weight-light\">La nueva clave debe contener mayúsculas, minúsculas y números, con un mínimo de 6 caracteres de largo.</span></h6>\n      <div class=\"row justify-content-beteween border-top pt-3\">\n        <div class=\"col-6\">\n          <button @click=\"modal_cambiar_clave=false; usuario={clave_actual:'', clave_nueva1:'', clave_nueva2:''}\" class=\"btn btn-block btn-sm btn-danger\"><i class=\"fas fa-times fa-fw mr-2\"></i>CANCELAR</button>\n        </div>\n        <div class=\"col-6\">\n          <button @click=\"guardaClave()\" :disabled=\"!validaInputsClave()\" class=\"btn btn-block btn-sm btn-success\"><i class=\"fas fa-check fa-fw mr-2\"></i>GUARDAR</button>\n        </div>\n      </div>\n    </b-modal>\n\n    <b-modal v-model=\"modal_cerrar_sesion\" title=\"CERRAR SESIÓN\" :footer=\"false\" hide-footer>\n      <h5 class=\"text-center\">¿SEGURO QUE DESEA SALIR?</h5>\n      <div class=\"row justify-content-between border-top pt-1 mt-4\">\n        <div class=\"col-lg-5 col-md-6 col-sm-12 mt-2\">\n          <button @click=\"modal_cerrar_sesion=false;\" class=\"btn btn-secondary btn-sm btn-block\"><i class=\"fas fa-ban\"></i> CANCELAR</button>\n        </div>\n        <div class=\"col-lg-5 col-md-6 col-sm-12 mt-2\">\n          <button @click=\"cerrarSesion();\" class=\"btn btn-primary btn-sm btn-block\"><i class=\"fas fa-sign-out-alt\"></i> CERRAR SESIÓN</button>\n        </div>\n      </div>\n    </b-modal>\n\n  </div>\n</template>\n\n<script>\n\nexport default {\n  name: 'App',\n  data(){\n    return {\n      id_electrocom         : 2,\n      num_empresa           : 0,\n      num_bodega            : 0,\n      nom_empresa           : '',\n      nom_bodega            : '',\n      barra                 : false, // VARIABLE QUE DETERMINA SI LA BARRA LATERAL ESTA OCULTA\n      menu                  : [\n        {nombre:'Ingreso'   , visible: false, icono: '<i class=\"fas fa-fw mr-2 fa-box\"></i>'        },\n        {nombre:'Salida'    , visible: false, icono: '<i class=\"fas fa-fw mr-2 fa-truck\"></i>'      },\n        {nombre:'Bodega'    , visible: false, icono: '<i class=\"fas fa-fw mr-2 fa-warehouse\"></i>'  },\n        {nombre:'Informes'  , visible: false, icono: '<i class=\"fas fa-fw mr-2 fa-file-alt\"></i>' }\n      ],\n      modal_cambiar_clave   : false,\n      modal_cerrar_sesion   : false,\n      usuario               : {rut:'', dv:'', nombres:'', apellidos:'', clave_actual:'', clave_nueva1:'', clave_nueva2:'', admin:false},\n      cargando_pagina       : false,\n      seccion               : 'Ingreso'\n    }\n  },\n\n  mounted(){\n    //this.obtieneDatosUsuario();\n    //this.setEmpresa();\n    if(this.getParameterByName('menu') != ''){\n      this.cambiaVista(this.getParameterByName('menu'));\n    }\n    else {\n      this.cambiaVista('Ingreso');\n    }\n\n    //this.cambiaVista(0);\n  },\n\n  methods:{\n    validaInputsClave(){\n      if(this.usuario.clave_actual != '' && this.usuario.clave_nueva1 == this.usuario.clave_nueva2 && this.usuario.clave_nueva1.length>5 && this.validaClave(this.usuario.clave_nueva1)){\n        return true;\n      }else{\n        return false;\n      }\n    },\n\n    validaClave(clave){\n      var regex = /^(?=.*\\d)(?=.*[a-záéíóúüñ]).*[A-ZÁÉÍÓÚÜÑ]/;\n      if(regex.test(clave) && clave.length > 5){\n        return true;\n      }else{\n        return false;\n      }\n    },\n\n    obtieneDatosUsuario(){\n      this.cargando_pagina = true;\n      axios.post(base_url+'Perfil/obtieneDatosUsuario').then( resp => {\n        if(resp.status === 200){\n          var mensaje = resp.data;\n          if(mensaje.key == 1){\n            this.cargando_pagina        = false;\n            this.usuario.rut            = mensaje.usb_rut;\n            this.usuario.dv             = mensaje.usb_dv;\n            this.usuario.nombres        = mensaje.usb_nombres;\n            this.usuario.apellidos      = mensaje.usb_apellidos;\n            this.usuario.usuario        = mensaje.usb_usuario;\n            this.usuario.administrador  = mensaje.usb_administrador;\n            this.usuario.administrativo = mensaje.usb_administrativo;\n            if(this.usuario.administrador || this.usuario.administrativo){\n              this.menu = this.menu_admin;\n            }\n            else{\n              this.menu = this.menu_personal;\n            }\n            setTimeout(()=>{\n              this.cambiaVista(0);\n            }, 1);\n          }\n          this.cargando_pagina        = false;\n        }\n        else{\n          this.cargando_pagina        = false;\n          this.modal_cambiar_clave    = false;\n          this.muestraToast('ERROR', 'ERROR AL CARGAS DATOS NECESARIOS, INTENTELO MAS TARDE.', 'danger');\n        }\n      });\n    },\n\n    guardaClave(){\n      this.cargando_pagina = true;\n      var dato = new URLSearchParams();\n      dato.append('clave_actual', sha1(md5(this.usuario.rut+this.usuario.clave_actual)));\n      dato.append('clave_nueva', sha1(md5(this.usuario.rut+this.usuario.clave_nueva1)));\n      axios.post(base_url+'Perfil/cambiaClave', dato).then( resp => {\n        if(resp.status === 200 && 'resp' in resp.data){\n          var mensaje = resp.data.resp;\n          if(mensaje.key == 1){\n            this.cargando_pagina      = false;\n            this.modal_cambiar_clave  = false; \n            this.usuario.clave_actual = '';\n            this.usuario.clave_nueva1 = ''; \n            this.usuario.clave_nueva2 = '';\n            this.muestraToast('ÉXITO', 'CLAVE CAMBIADA CON ÉXITO.', 'success');\n          }\n          else if(mensaje.key == 2) {\n            this.cargando_pagina      = false;\n            this.muestraToast('ATENCIÓN', 'LA CLAVE ACTUAL INGRESADA NO ES CORRECTA.', 'danger');\n          }\n          else if(mensaje.key == 0) {\n            this.cargando_pagina      = false;\n            this.muestraToast('ERROR', 'ERROR AL REALIZAR CAMBIOS, INTENTELO MAS TARDE.', 'danger');\n          }\n        }\n        else{\n          this.cargando_pagina        = false;\n          this.muestraToast('ERROR', 'ERROR AL REALIZAR CAMBIOS, INTENTELO MAS TARDE.', 'danger');\n        }\n      });\n    },\n\n    ocultaBarra(){\n      $('#exampleAccordion').css('width', '55px');\n      $('.item_lateral').css('width', '55px');\n      $('.content-wrapper').css('margin-left', '55px');\n      this.barra = false;\n      $(\".texto_barra\").hide();\n    },\n\n    muestraBarra(){\n      $('#exampleAccordion').css('width', '250px');\n      $('.item_lateral').css('width', '250px');\n      $('.content-wrapper').css('margin-left', '250px');\n      this.barra = true;\n      $(\".texto_barra\").show();\n\n    },\n\n    cambiaVista(vista){\n      history.pushState(null, \"\", \"?menu=\"+vista);\n      for(var i=0; i<this.menu.length; i++){\n        if(this.menu[i].nombre == vista)  { \n          this.menu[i].visible = true;   \n        }\n        else { \n          this.menu[i].visible = false;\n        }\n      }\n      \n      $('.item_lateral').removeClass('active');\n      $('#item_'+vista).addClass('active');  \n      this.ocultaMenu();\n    },\n\n    ocultaMenu(){\n      $('#navbarResponsive').hide(100); \n    },\n\n    muestraBarraSuperior(){\n      $('#navbarResponsive').toggle(100);\n    },\n\n    setEmpresa(){\n      axios.post(base_url+'sucursal/setempresa').then( resp => {\n        this.num_empresa  = resp.data.dts_empresa;\n        this.num_bodega   = resp.data.dts_bodega;\n        this.nom_empresa  = resp.data.emp_nombre;\n        this.nom_bodega   = resp.data.bod_nombre;\n      });\n    },\n\n    getParameterByName(name) {\n      name = name.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\n      var regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\"),\n      results = regex.exec(location.search);\n      return results === null ? \"\" : decodeURIComponent(results[1].replace(/\\+/g, \" \"));\n    }\n\n  }\n\n}\n</script>\n\n<style>\nhtml {\n  background-color: #343a40;\n}\n\n.v-select .vs__dropdown-menu {\n  max-height: 200px;\n}\n\n.v-select .vs__dropdown-toggle{\n  border: 0!important;\n}\n</style>\n\n<style scoped>\n@media (max-width: 991px) {\n  .content-wrapper{\n    margin-left: auto!important;\n  }\n\n  .texto_barra{\n    display: inline-block !important;\n  }\n\n  #exampleAccordion{\n    width:250px !important;\n  }\n\n  .item_lateral{\n      width:250px !important;\n  }\n}\n\n/*.modal\n{\n  background: black !important;\n}*/\n</style>"]}]}