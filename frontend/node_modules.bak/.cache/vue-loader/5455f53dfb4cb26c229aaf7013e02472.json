{"remainingRequest":"/srv/repos/bodega_central/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/srv/repos/bodega_central/frontend/src/components/bodega/Ingreso.vue?vue&type=script&lang=js&","dependencies":[{"path":"/srv/repos/bodega_central/frontend/src/components/bodega/Ingreso.vue","mtime":1678131154655},{"path":"/srv/repos/bodega_central/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1676473588660},{"path":"/srv/repos/bodega_central/frontend/node_modules/vue-loader/lib/index.js","mtime":1676473588036}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCl7CiAgICByZXR1cm57CiAgICAgIGNhcmdhbmRvX3BhZ2luYSAgIDogZmFsc2UsCiAgICAgIG51ZXZvX2luZ3Jlc28gICAgIDoge2RvY3VtZW50bzonJywgdGlwb19kb2N1bWVudG86JycsIG9yZGVuX2NvbXByYTonJywgc3VjdXJzYWw6JycsIGZlY2hhX2Rlc3BhY2hvOicnLCBwZXNvOicnLCBlc3BhY2lvOicnfSwKICAgICAgc3VjdXJzYWxlcyAgICAgICAgOiBbXSwKICAgICAgdGlwb3NfZG9jdW1lbnRvcyAgOiBbCiAgICAgICAge3ZhbHVlOjMzLCB0ZXh0OidGQUNUVVJBJ30sIAogICAgICAgIHt2YWx1ZTozOSwgdGV4dDonQk9MRVRBJ30sIAogICAgICAgIHt2YWx1ZTo1MiwgdGV4dDonR1VJQSBERVNQQUNITyd9CiAgICAgIF0sCiAgICAgIGVzcGFjaW9zX2Rpc3BvbmlibGVzICA6IFtdLAogICAgICBlc3BfZGlzcF9maWx0cmFkb3MgICAgOiBbXSwKICAgICAgbW9kYWxfc2VsZWNjaW9uYXIgICAgIDogZmFsc2UsCiAgICAgIG1vZGFsX2NvbmZpcm1hciAgICAgICA6IGZhbHNlLAogICAgICBtb2RhbF9tc2ogICAgICAgICAgICAgOiBmYWxzZSwKICAgICAgbXNqX3JlZ2lzdHJvICAgICAgICAgIDogJycsCiAgICAgIGZpbHRyb19lc3RhbnRlICAgICAgICA6ICcnLAogICAgICBmZWNoYV9hY3R1YWwgICAgICAgICAgOiAnJwogICAgfQogIH0sCiAgbW91bnRlZCgpewogICAgdGhpcy5mZWNoYV9hY3R1YWwgPSBuZXcgRGF0ZSgpOwogICAgdGhpcy5saXN0YXJTdWN1cnNhbGVzKCk7CiAgfSwKICBtZXRob2RzOnsKICAgIGxpc3RhckVzcGFjaW9zRGlzcG9uaWJsZXMoKXsKICAgICAgdGhpcy5jYXJnYW5kb19wYWdpbmEgPSB0cnVlOwogICAgICBjb25zdCBkYXRvcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTsKICAgICAgZGF0b3MuYXBwZW5kKCdwZXNvJywgdGhpcy5udWV2b19pbmdyZXNvLnBlc28pOwogICAgICBheGlvcy5wb3N0KGJhc2VfdXJsKydib2RlZ2EvbGlzdGFyRXNwYWNpb3NEaXNwb25pYmxlcycsIGRhdG9zKS50aGVuKCByZXNwID0+IHsKICAgICAgICB0aGlzLmVzcGFjaW9zX2Rpc3BvbmlibGVzID0gcmVzcC5kYXRhOwogICAgICAgIHRoaXMuZmlsdHJhckVzdGFudGVzKCk7CiAgICAgICAgdGhpcy5tb2RhbF9zZWxlY2Npb25hciAgICA9IHRydWU7CiAgICAgICAgdGhpcy5jYXJnYW5kb19wYWdpbmEgICAgICA9IGZhbHNlOwogICAgICB9KS5jYXRjaChlcnJvciA9PnsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgdGhpcy5jYXJnYW5kb19wYWdpbmEgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAoKICAgIGZpbHRyYXJFc3RhbnRlcygpewogICAgICBpZih0aGlzLmZpbHRyb19lc3RhbnRlICE9ICcnKXsKICAgICAgICB0aGlzLmVzcF9kaXNwX2ZpbHRyYWRvcyA9IFtdOwogICAgICAgIHRoaXMuZXNwYWNpb3NfZGlzcG9uaWJsZXMuZm9yRWFjaChlc3BhY2lvID0+IHsKICAgICAgICAgIGlmKGVzcGFjaW8uZXNwX2VzdGFudGUgPT0gdGhpcy5maWx0cm9fZXN0YW50ZSl7CiAgICAgICAgICAgIHRoaXMuZXNwX2Rpc3BfZmlsdHJhZG9zLnB1c2goZXNwYWNpbyk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgZWxzZSB7CiAgICAgICAgdGhpcy5lc3BfZGlzcF9maWx0cmFkb3MgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZXNwYWNpb3NfZGlzcG9uaWJsZXMpKQogICAgICB9CiAgICB9LAoKICAgIGxpc3RhclN1Y3Vyc2FsZXMoKXsKICAgICAgdGhpcy5jYXJnYW5kb19wYWdpbmEgPSB0cnVlOwogICAgICBheGlvcy5wb3N0KGJhc2VfdXJsKydib2RlZ2EvbGlzdGFyU3VjdXJzYWxlcycpLnRoZW4oIHJlc3AgPT4gewogICAgICAgIHRoaXMuc3VjdXJzYWxlcyAgICAgICA9IHJlc3AuZGF0YTsKICAgICAgICB0aGlzLmNhcmdhbmRvX3BhZ2luYSAgPSBmYWxzZTsKICAgICAgfSkuY2F0Y2goZXJyb3IgPT57CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgIHRoaXMuY2FyZ2FuZG9fcGFnaW5hID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKCiAgICB2YWxpZGFEYXRvcygpewogICAgICBpZih0aGlzLm51ZXZvX2luZ3Jlc28uZG9jdW1lbnRvICE9ICcnICYmIHRoaXMubnVldm9faW5ncmVzby50aXBvX2RvY3VtZW50byAhPSAnJyAmJiB0aGlzLm51ZXZvX2luZ3Jlc28uc3VjdXJzYWwgIT0gJycgJiYgdGhpcy5udWV2b19pbmdyZXNvLmZlY2hhX2Rlc3BhY2hvICE9ICcnICYmIHRoaXMubnVldm9faW5ncmVzby5wZXNvICE9ICcnKXsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0sCgogICAgcmVnaXN0cmFySW5ncmVzbygpewogICAgICB0aGlzLmNhcmdhbmRvX3BhZ2luYSA9IHRydWU7CiAgICAgIGNvbnN0IGRhdG9zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpOwogICAgICBkYXRvcy5hcHBlbmQoJ2luZ3Jlc28nLCBKU09OLnN0cmluZ2lmeSh0aGlzLm51ZXZvX2luZ3Jlc28pKTsKICAgICAgYXhpb3MucG9zdChiYXNlX3VybCsnYm9kZWdhL3JlZ2lzdHJhckluZ3Jlc28nLCBkYXRvcykudGhlbiggcmVzcCA9PiB7CiAgICAgICAgaWYocmVzcC5kYXRhLmtleSA9PSAxKXsKICAgICAgICAgIHRoaXMubXNqX3JlZ2lzdHJvICAgICAgPSAnSU5HUkVTTyBSRUdJU1RSQURPIENPUlJFQ1RBTUVOVEUuJwogICAgICAgICAgdGhpcy5tb2RhbF9tc2ogICAgICAgICA9IHRydWU7CiAgICAgICAgICB0aGlzLm1vZGFsX3NlbGVjY2lvbmFyID0gZmFsc2U7CiAgICAgICAgICB0aGlzLm1vZGFsX2NvbmZpcm1hciAgID0gZmFsc2U7CiAgICAgICAgICB0aGlzLmNhcmdhbmRvX3BhZ2luYSAgID0gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgdGhpcy5tc2pfcmVnaXN0cm8gICAgICA9IHJlc3AuZGF0YS5tc2o7CiAgICAgICAgICB0aGlzLm1vZGFsX21zaiAgICAgICAgID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGVycm9yID0+ewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICB0aGlzLmNhcmdhbmRvX3BhZ2luYSA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCgogICAgbGltcGlhckRhdG9zKCl7CiAgICAgIHRoaXMubnVldm9faW5ncmVzbyA9IHtkb2N1bWVudG86JycsIHRpcG9fZG9jdW1lbnRvOicnLCBvcmRlbl9jb21wcmE6JycsIHN1Y3Vyc2FsOicnLCBmZWNoYV9kZXNwYWNobzonJywgcGVzbzonJywgZXNwYWNpbzonJ307CiAgICAgIHRoaXMuZXNwYWNpb3NfZGlzcG9uaWJsZXMgPSBbXTsKICAgICAgdGhpcy5tb2RhbF9tc2ogPSBmYWxzZTsKICAgIH0KICAgIAogIH0KfQoK"},{"version":3,"sources":["Ingreso.vue"],"names":[],"mappings":";AA6HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"Ingreso.vue","sourceRoot":"src/components/bodega","sourcesContent":["<template>\n  <div class=\"container-fluid\">\n    <loader-component :cargando_pagina=\"cargando_pagina\"/>\n    <div class=\"row\">\n      <div class=\"col-12 text-md-left text-center\">\n        <h3><i class=\"fas fa-fw fa-box mr-2\"></i>INGRESO BODEGA</h3>\n      </div>\n    </div>\n\n\n    <div class=\"row justify-content-center mt-4\">\n      <div class=\"col-xl-6 col-md-10 col-12\">\n        DOCUMENTO\n        <b-form-input v-model=\"nuevo_ingreso.documento\" class=\"mb-3\"></b-form-input>\n        TIPO DOCUMENTO\n        <b-form-select v-model=\"nuevo_ingreso.tipo_documento\" class=\"mb-3\" :options=\"tipos_documentos\"></b-form-select>\n        ORDEN DE COMPRA\n        <b-form-input v-model=\"nuevo_ingreso.orden_compra\" class=\"mb-3\"></b-form-input>\n        SUCURSAL DESTINO\n        <b-form-select v-model=\"nuevo_ingreso.sucursal\" class=\"mb-3\" :options=\"sucursales\" :value-field=\"'suc_id'\" :text-field=\"'suc_nombre'\"></b-form-select>\n        FECHA ESTIMADA DESPACHO\n        <b-form-datepicker v-model=\"nuevo_ingreso.fecha_despacho\" class=\"mb-3\" :min=\"fecha_actual\" placeholder=\"SELECCIONA FECHA\" label-help=\"Selecciona un día.\" label-no-date-selected=\"-\" label-next-month=\"SIGUIENTE MES\" label-prev-month=\"MES ANTERIOR\" label-prev-year=\"AÑO ANTERIOR\" label-next-year=\"SIGUIENTE AÑO\" label-current-month=\"MES ACTUAL\" start-weekday=\"1\"></b-form-datepicker>\n        PESO (Kg)\n        <b-form-input v-model=\"nuevo_ingreso.peso\" class=\"mb-3\"></b-form-input>\n      </div>\n      <div class=\"col-12 text-center\">\n        <b-button :disabled=\"!validaDatos()\" @click=\"listarEspaciosDisponibles();\" variant=\"primary\" size=\"sm\">REGISTRAR</b-button>\n      </div>\n    </div>\n\n    <b-modal v-model=\"modal_seleccionar\" size=\"lg\" title=\"SELECCIONA LUGAR\" hide-footer no-close-on-backdrop :scrollable=\"false\">\n      <div class=\"row\">\n        <div class=\"col\">\n          <h6>BUSCAR ESTANTE</h6>\n          <b-form-input placeholder=\"Numero de estante\" @input=\"filtrarEstantes();\" v-model=\"filtro_estante\" class=\"mb-3\"></b-form-input>\n        </div>\n      </div>\n      <div class=\"row mt-2 div-scroll\">\n        <!-- <div class=\"col-4 text-center\" v-for=\"(espacio, index) in esp_disp_filtrados\" :key=\"'esp'+index\">\n          <b-card no-body class=\"p-1 espacio\">\n            <h6> Estante: <strong>{{ espacio.esp_estante }}</strong> Sección: <strong>{{ espacio.esp_seccion }}</strong></h6>\n            <h6> Espacio: <strong>{{ espacio.esp_numero }}</strong></h6>\n            <h6> Peso: <strong>{{ espacio.esp_peso }}</strong></h6>\n          </b-card>\n        </div> -->\n        <table class=\"table table-striped text-center table-scroll\">\n          <thead>\n            <tr>\n              <th scope=\"col\">ESTANTE</th>\n              <th scope=\"col\">SECCION</th>\n              <th scope=\"col\">ESPACIO</th>\n              <th scope=\"col\">PESO</th>\n              <th scope=\"col\">-</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"(espacio, index) in esp_disp_filtrados\" :key=\"'esp'+index\">\n              <td class=\"p-1\">{{espacio.esp_estante}}</td>\n              <td class=\"p-1\">{{espacio.esp_seccion}}</td>\n              <td class=\"p-1\">{{espacio.esp_numero}}</td>\n              <td class=\"p-1\">{{espacio.esp_peso}}</td>\n              <td class=\"p-1\"><b-button @click=\"nuevo_ingreso.espacio = espacio; modal_confirmar=true;\" variant=\"info\" size=\"sm\"><i class=\"fas fa-check\"></i></b-button></td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class=\"row mt-3 pt-3 border-top\">\n        <div class=\"col text-center\">\n          <b-button @click=\"modal_seleccionar=false;\" variant=\"danger\" size=\"sm\">CERRAR</b-button>\n        </div>\n      </div>\n    </b-modal>\n\n    <b-modal v-model=\"modal_confirmar\" size=\"lg\" title=\"CONFIRMAR REGISTRO\" hide-footer no-close-on-backdrop :scrollable=\"false\">\n      <div class=\"row\">\n        <div class=\"col-12\">\n          <h6><strong>DATOS DE INGRESO</strong></h6>\n        </div>\n        <div class=\"col-5\"><h6>TIPO DOCUMENTO</h6></div>\n        <div class=\"col-7\"><h6 v-for=\"(doc,index) in tipos_documentos\" :key=\"'tip'+index\" v-show=\"doc.value==nuevo_ingreso.tipo_documento\">: {{doc.text}}</h6></div>\n        <div class=\"col-5\"><h6>N° DOCUMENTO</h6></div>\n        <div class=\"col-7\"><h6>: {{nuevo_ingreso.documento}}</h6></div>\n        <div v-if=\"nuevo_ingreso.orden_compra != ''\" class=\"col-5\"><h6>ORDEN COMPRA</h6></div>\n        <div v-if=\"nuevo_ingreso.orden_compra != ''\" class=\"col-7\"><h6>: {{nuevo_ingreso.orden_compra}}</h6></div>\n        <div class=\"col-5\"><h6>FECHA ESTIMADA DESPACHO</h6></div>\n        <div class=\"col-7\"><h6>: {{nuevo_ingreso.fecha_despacho.split('-')[2]+'-'+nuevo_ingreso.fecha_despacho.split('-')[1]+'-'+nuevo_ingreso.fecha_despacho.split('-')[0]}}</h6></div>\n        <div class=\"col-5\"><h6>PESO</h6></div>\n        <div class=\"col-7\"><h6>: {{nuevo_ingreso.peso}}</h6></div>\n\n        <div class=\"col-12 mt-3\">\n          <h6><strong>LUGAR PARA ALMACENAR</strong></h6>\n        </div>\n        <div class=\"col-5\"><h6>ESTANTE</h6></div>\n        <div class=\"col-7\"><h6>: {{nuevo_ingreso.espacio.esp_estante}}</h6></div>\n        <div class=\"col-5\"><h6>SECCION</h6></div>\n        <div class=\"col-7\"><h6>: {{nuevo_ingreso.espacio.esp_seccion}}</h6></div>\n        <div class=\"col-5\"><h6>ESPACIO</h6></div>\n        <div class=\"col-7\"><h6>: {{nuevo_ingreso.espacio.esp_numero}}</h6></div>\n        <div class=\"col-5\"><h6>CAPACIDAD (Kg)</h6></div>\n        <div class=\"col-7\"><h6>: {{nuevo_ingreso.espacio.esp_peso}}</h6></div>\n      </div>\n      <div class=\"row mt-3 pt-3 border-top\">\n        <div class=\"col text-center\">\n          <b-button @click=\"registrarIngreso()\" variant=\"primary\" size=\"sm\">CONFIRMAR</b-button>\n        </div>\n      </div>\n    </b-modal>\n\n    <b-modal v-model=\"modal_msj\" size=\"lg\" title=\"REGISTRO DE INGRESO\" hide-footer no-close-on-backdrop :scrollable=\"false\">\n      <div class=\"row\">\n        <div class=\"col-12\">\n          <h6><strong>{{msj_registro}}</strong></h6>\n        </div>\n      </div>\n      <div class=\"row mt-3 pt-3 border-top\">\n        <div class=\"col text-center\">\n          <b-button @click=\"limpiarDatos();\" variant=\"primary\" size=\"sm\">ACEPTAR</b-button>\n        </div>\n      </div>\n    </b-modal>\n\n  </div>\n</template>\n\n<script>\nexport default {\n  data(){\n    return{\n      cargando_pagina   : false,\n      nuevo_ingreso     : {documento:'', tipo_documento:'', orden_compra:'', sucursal:'', fecha_despacho:'', peso:'', espacio:''},\n      sucursales        : [],\n      tipos_documentos  : [\n        {value:33, text:'FACTURA'}, \n        {value:39, text:'BOLETA'}, \n        {value:52, text:'GUIA DESPACHO'}\n      ],\n      espacios_disponibles  : [],\n      esp_disp_filtrados    : [],\n      modal_seleccionar     : false,\n      modal_confirmar       : false,\n      modal_msj             : false,\n      msj_registro          : '',\n      filtro_estante        : '',\n      fecha_actual          : ''\n    }\n  },\n  mounted(){\n    this.fecha_actual = new Date();\n    this.listarSucursales();\n  },\n  methods:{\n    listarEspaciosDisponibles(){\n      this.cargando_pagina = true;\n      const datos = new URLSearchParams();\n      datos.append('peso', this.nuevo_ingreso.peso);\n      axios.post(base_url+'bodega/listarEspaciosDisponibles', datos).then( resp => {\n        this.espacios_disponibles = resp.data;\n        this.filtrarEstantes();\n        this.modal_seleccionar    = true;\n        this.cargando_pagina      = false;\n      }).catch(error =>{\n        console.log(error);\n        this.cargando_pagina = false;\n      });\n    },\n\n    filtrarEstantes(){\n      if(this.filtro_estante != ''){\n        this.esp_disp_filtrados = [];\n        this.espacios_disponibles.forEach(espacio => {\n          if(espacio.esp_estante == this.filtro_estante){\n            this.esp_disp_filtrados.push(espacio);\n          }\n        });\n      }\n      else {\n        this.esp_disp_filtrados = JSON.parse(JSON.stringify(this.espacios_disponibles))\n      }\n    },\n\n    listarSucursales(){\n      this.cargando_pagina = true;\n      axios.post(base_url+'bodega/listarSucursales').then( resp => {\n        this.sucursales       = resp.data;\n        this.cargando_pagina  = false;\n      }).catch(error =>{\n        console.log(error);\n        this.cargando_pagina = false;\n      });\n    },\n\n    validaDatos(){\n      if(this.nuevo_ingreso.documento != '' && this.nuevo_ingreso.tipo_documento != '' && this.nuevo_ingreso.sucursal != '' && this.nuevo_ingreso.fecha_despacho != '' && this.nuevo_ingreso.peso != ''){\n        return true;\n      }\n      else {\n        return false;\n      }\n    },\n\n    registrarIngreso(){\n      this.cargando_pagina = true;\n      const datos = new URLSearchParams();\n      datos.append('ingreso', JSON.stringify(this.nuevo_ingreso));\n      axios.post(base_url+'bodega/registrarIngreso', datos).then( resp => {\n        if(resp.data.key == 1){\n          this.msj_registro      = 'INGRESO REGISTRADO CORRECTAMENTE.'\n          this.modal_msj         = true;\n          this.modal_seleccionar = false;\n          this.modal_confirmar   = false;\n          this.cargando_pagina   = false;\n        }\n        else {\n          this.msj_registro      = resp.data.msj;\n          this.modal_msj         = true;\n        }\n      }).catch(error =>{\n        console.log(error);\n        this.cargando_pagina = false;\n      });\n    },\n\n    limpiarDatos(){\n      this.nuevo_ingreso = {documento:'', tipo_documento:'', orden_compra:'', sucursal:'', fecha_despacho:'', peso:'', espacio:''};\n      this.espacios_disponibles = [];\n      this.modal_msj = false;\n    }\n    \n  }\n}\n\n</script>\n\n<style scoped>\n.espacio {\n  cursor: pointer;\n}\n\n.espacio:hover {\n  color: #155724;\n  background-color: #d4edda;\n  border-color: #c3e6cb;\n}\n\n.espacio:active{\n  background-color: #20c997;\n}\n\n.table-scroll {\n  position: relative;\n  height: 400px;\n  overflow: auto;\n}\n\n.div-scroll {\n  position: relative;\n  overflow: auto;\n  max-height: 400px;\n}\n</style>\n"]}]}