{"remainingRequest":"/srv/repos/cables_ecom/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/srv/repos/cables_ecom/frontend/src/components/cortes/Cortes.vue?vue&type=script&lang=js&","dependencies":[{"path":"/srv/repos/cables_ecom/frontend/src/components/cortes/Cortes.vue","mtime":1676386590252},{"path":"/srv/repos/cables_ecom/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/srv/repos/cables_ecom/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCl7CiAgICByZXR1cm57CiAgICAgIGNvbHVtbmFzOiBbCiAgICAgICAgeyBrZXk6ICdjcnRfZmVjaGFfaG9yYScgICAgICwgbGFiZWw6ICdGRUNIQS1IT1JBJyAgICwgc29ydGFibGU6IHRydWUsICAgdGRDbGFzczoncC0xJywgdGhDbGFzczoncC0xJyB9LAogICAgICAgIHsga2V5OiAnY3J0X2RvY3VtZW50bycgICAgICAsIGxhYmVsOiAnTsKwIERPQycgICAgICAgLCBzb3J0YWJsZTogdHJ1ZSwgICB0ZENsYXNzOidwLTEnLCB0aENsYXNzOidwLTEnIH0sCiAgICAgICAgeyBrZXk6ICdjcnRfdGlwb19kb2N1bWVudG8nICwgbGFiZWw6ICdET0MnICAgICAgICAgICwgc29ydGFibGU6IHRydWUsICAgdGRDbGFzczoncC0xJywgdGhDbGFzczoncC0xJyB9LAogICAgICAgIHsga2V5OiAnY3J0X2NsaWVudGUnICAgICAgICAsIGxhYmVsOiAnQ0xJRU5URScgICAgICAsIHNvcnRhYmxlOiB0cnVlLCAgIHRkQ2xhc3M6J3AtMScsIHRoQ2xhc3M6J3AtMScgfSwKICAgICAgICB7IGtleTogJ2NydF90aXBvX2NhYmxlJyAgICAgLCBsYWJlbDogJ0NBQkxFJyAgICAgICAgLCBzb3J0YWJsZTogdHJ1ZSwgICB0ZENsYXNzOidwLTEnLCB0aENsYXNzOidwLTEnIH0sCiAgICAgICAgeyBrZXk6ICdjcnRfb2JzZXJ2YWNpb24nICAgICwgbGFiZWw6ICdPQlNFUlZBQ0lPTicgICwgdGRDbGFzczoncC0xJywgdGhDbGFzczoncC0xJyB9LAogICAgICAgIHsga2V5OiAnb3BjaW9uZXMnICAgICAgICAgICAsIGxhYmVsOiAnLScgICAgICAgICAgICAsIHRkQ2xhc3M6J3AtMScsIHRoQ2xhc3M6J3AtMScgfQogICAgICBdLAogICAgICBtZXNlcyA6IFsKICAgICAgICB7dmFsdWU6MSwgdGV4dDonRU5FUk8nfSwKICAgICAgICB7dmFsdWU6MiwgdGV4dDonRkVCUkVSTyd9LAogICAgICAgIHt2YWx1ZTozLCB0ZXh0OidNQVJaTyd9LAogICAgICAgIHt2YWx1ZTo0LCB0ZXh0OidBQlJJTCd9LAogICAgICAgIHt2YWx1ZTo1LCB0ZXh0OidNQVlPJ30sCiAgICAgICAge3ZhbHVlOjYsIHRleHQ6J0pVTklPJ30sCiAgICAgICAge3ZhbHVlOjcsIHRleHQ6J0pVTElPJ30sCiAgICAgICAge3ZhbHVlOjgsIHRleHQ6J0FHT1NUTyd9LAogICAgICAgIHt2YWx1ZTo5LCB0ZXh0OidTRVBUSUVNQlJFJ30sCiAgICAgICAge3ZhbHVlOjEwLCB0ZXh0OidPQ1RVQlJFJ30sCiAgICAgICAge3ZhbHVlOjExLCB0ZXh0OidOT1ZJRU1CUkUnfSwKICAgICAgICB7dmFsdWU6MTIsIHRleHQ6J0RJQ0lFTUJSRSd9CiAgICAgIF0sCiAgICAgIG1lcyAgICAgICAgICAgICA6IDEsCiAgICAgIGFub3MgICAgICAgICAgICA6IFtdLAogICAgICBhbm8gICAgICAgICAgICAgOiAyMDIzLAogICAgICBjb3J0ZXMgICAgICAgICAgOiBbXSwKICAgICAgZmlsdHJvICAgICAgICAgIDogJycsCiAgICAgIG1vZGFsX2RldGFsbGUgICA6IGZhbHNlLAogICAgICBjb3J0ZV9zZWxlYyAgICAgOiAnJywKICAgICAgY2FyZ2FuZG9fcGFnaW5hIDogZmFsc2UKICAgIH0KICB9LAogIG1vdW50ZWQoKXsKICAgIGNvbnN0IGZlY2hhID0gbmV3IERhdGUoKTsKICAgIHRoaXMuYW5vICAgID0gZmVjaGEuZ2V0RnVsbFllYXIoKTsKICAgIHRoaXMubWVzICAgID0gZmVjaGEuZ2V0TW9udGgoKSArIDE7IAogICAgdGhpcy5saXN0YXJBbm9zKCk7CiAgfSwKICBtZXRob2RzOnsKICAgIGxpc3RhckNvcnRlcygpewogICAgICB0aGlzLmNhcmdhbmRvX3BhZ2luYSA9IHRydWU7CiAgICAgIHZhciBkYXRhID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpOwogICAgICBkYXRhLmFwcGVuZCgnbWVzJywgdGhpcy5tZXMpOwogICAgICBkYXRhLmFwcGVuZCgnYW5vJywgdGhpcy5hbm8pOwogICAgICBheGlvcy5wb3N0KGJhc2VfdXJsKydjYWJsZXMvbGlzdGFyQ29ydGVzJywgZGF0YSkudGhlbiggcmVzcCA9PiB7CiAgICAgICAgdGhpcy5jb3J0ZXMgICAgICAgICAgID0gcmVzcC5kYXRhLmNvcnRlczsKICAgICAgICB0aGlzLmNhcmdhbmRvX3BhZ2luYSAgPSBmYWxzZTsKICAgICAgfSkuY2F0Y2goZXJyb3IgPT57CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgIHRoaXMuY2FyZ2FuZG9fcGFnaW5hID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKCiAgICBsaXN0YXJBbm9zKCl7CiAgICAgIHRoaXMuY2FyZ2FuZG9fcGFnaW5hID0gdHJ1ZTsKICAgICAgYXhpb3MucG9zdChiYXNlX3VybCsnY2FibGVzL2xpc3RhckFub3MnKS50aGVuKCByZXNwID0+IHsKICAgICAgICB0aGlzLmFub3MgICAgICA9IHJlc3AuZGF0YS5hbm9zOwogICAgICAgIGlmKHRoaXMuYW5vcy5sZW5ndGggPT0gMCl7CiAgICAgICAgICB0aGlzLmFub3MgPSBbMjAyM107CiAgICAgICAgfQogICAgICAgIHRoaXMubGlzdGFyQ29ydGVzKCk7CiAgICAgIH0pLmNhdGNoKGVycm9yID0+ewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICB0aGlzLmNhcmdhbmRvX3BhZ2luYSA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgfQp9Cgo="},{"version":3,"sources":["Cortes.vue"],"names":[],"mappings":";AA6IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Cortes.vue","sourceRoot":"src/components/cortes","sourcesContent":["<template>\n  <div class=\"container-fluid\">\n    <loader-component :cargando_pagina=\"cargando_pagina\"/>\n    <div class=\"row\">\n      <div class=\"col-12 text-md-left text-center\">\n        <h3><i class=\"fas fa-fw fa-list mr-2\"></i>CORTES REGISTRADOS</h3>\n      </div>\n    </div>\n\n\n    <div class=\"row justify-content-center mt-4\">\n      <div class=\"col-12\">\n        <b-card no-body class=\"p-0\">\n          <template #header>\n            <div class=\"row\">\n              <div class=\"col-3 text-md-left text-center\">\n                <b-input-group prepend=\"AÑO\">\n                  <b-form-select v-model=\"ano\" :options=\"anos\" @change=\"listarCortes();\"></b-form-select>\n                </b-input-group>\n              </div>\n              <div class=\"col-3 text-md-left text-center\">\n                <b-input-group prepend=\"MES\">\n                  <b-form-select v-model=\"mes\" :options=\"meses\" @change=\"listarCortes();\"></b-form-select>\n                </b-input-group>\n              </div>\n              <div class=\"col-6 text-md-left text-center\">\n                <b-input-group prepend=\"FILTRO\">\n                  <b-form-input v-model=\"filtro\" placeholder=\"BUSCAR\"></b-form-input>\n                </b-input-group>\n              </div>\n            </div>\n          </template>\n          <b-table show-empty class=\"mb-0\" :tbody-class=\"'text-center'\" :thead-tr-class=\"'text-center align-middle'\" :thead-class=\"'text-center align-middle'\" \n          :head-variant=\"'light'\" @filtered=\"onFiltered\" :items=\"cortes\" :fields=\"columnas\" \n          :filter=\"filtro\" bordered hover responsive empty-text=\"SIN DATOS PARA LISTAR.\" empty-filtered-text=\"SIN DATOS PARA LISTAR.\">\n            <template v-slot:table-busy>\n              <div class=\"text-center text-dark my-2\">\n                <b-spinner class=\"align-middle\"></b-spinner>\n                <strong>&nbsp;CARGANDO...</strong>\n              </div>\n            </template>\n            <!-- <template v-slot:cell(crt_fecha_hora)=\"data\">\n              {{ \n              data.value.split(' ')[0].split('-')[2]+'-'+\n              data.value.split(' ')[0].split('-')[1]+'-'+\n              data.value.split(' ')[0].split('-')[0]+' '+\n              data.value.split(' ')[1].split(':')[0]+':'+\n              data.value.split(' ')[1].split(':')[1]\n              }}\n            </template> -->\n            <template v-slot:cell(crt_tipo_documento)=\"data\">\n              <span v-if=\"data.value == 33\">FACTURA</span>\n              <span v-if=\"data.value == 39\">BOLETA</span>\n              <span v-if=\"data.value == 52\">G. DESPACHO</span>\n            </template>\n            <template v-slot:cell(crt_cliente)=\"data\">\n              <span>{{data.item.crt_rut_cliente+'-'+data.item.crt_dv_cliente+' | '+data.item.crt_nombre_cliente}}</span>\n            </template>\n            <template v-slot:cell(opciones)=\"data\">\n              <b-button @click=\"corte_selec = data.item; modal_detalle=true;\" variant=\"info\"><i class=\"fas fa-fw fa-eye\"></i> </b-button>\n            </template>\n          </b-table>\n        </b-card>\n      </div>\n    </div>\n\n    <b-modal v-if=\"corte_selec!=''\" v-model=\"modal_detalle\" size=\"lg\" title=\"DETALLES DE CORTE\" hide-footer no-close-on-backdrop :scrollable=\"false\">\n      <b-input-group prepend=\"FECHA REGISTRO\">\n        <b-form-input class=\"text-right\" readonly \n          :value=\"corte_selec.crt_fecha_hora.split(' ')[0].split('-')[2]+'-'+\n                  corte_selec.crt_fecha_hora.split(' ')[0].split('-')[1]+'-'+\n                  corte_selec.crt_fecha_hora.split(' ')[0].split('-')[0]+' '+\n                  corte_selec.crt_fecha_hora.split(' ')[1].split(':')[0]+':'+\n                  corte_selec.crt_fecha_hora.split(' ')[1].split(':')[1]\"></b-form-input>\n      </b-input-group>\n      <b-input-group class=\"mt-2\" prepend=\"N° DOCUMENTO\">\n        <b-form-input class=\"text-right\" readonly :value=\"corte_selec.crt_documento\"></b-form-input>\n      </b-input-group>\n      <b-input-group prepend=\"TIPO DOCUMENTO\">\n        <b-form-input v-if=\"corte_selec.crt_tipo_documento == 33\" class=\"text-right\" readonly :value=\"'FACTURA'\"></b-form-input>\n        <b-form-input v-if=\"corte_selec.crt_tipo_documento == 39\" class=\"text-right\" readonly :value=\"'BOLETA'\"></b-form-input>\n        <b-form-input v-if=\"corte_selec.crt_tipo_documento == 52\" class=\"text-right\" readonly :value=\"'GUIA DESPACHO'\"></b-form-input>\n      </b-input-group>\n      <b-input-group prepend=\"RUT CLIENTE\">\n        <b-form-input class=\"text-right\" readonly :value=\"corte_selec.crt_rut_cliente+'-'+corte_selec.crt_dv_cliente\"></b-form-input>\n      </b-input-group>\n      <b-input-group prepend=\"NOMBRE CLIENTE\">\n        <b-form-input class=\"text-right\" readonly :value=\"corte_selec.crt_nombre_cliente\"></b-form-input>\n      </b-input-group>\n\n      <b-input-group class=\"mt-2\" prepend=\"ARTICULO/TIPO DE CABLE\">\n        <b-form-input class=\"text-right\" readonly :value=\"corte_selec.crt_tipo_cable\"></b-form-input>\n      </b-input-group>\n      <b-input-group prepend=\"CALIBRE DE CABLE\">\n        <b-form-input class=\"text-right\" readonly :value=\"corte_selec.crt_calibre_cable\"></b-form-input>\n      </b-input-group>\n      <b-input-group prepend=\"OBSERVACION\">\n        <b-form-input class=\"text-right\" readonly :value=\"corte_selec.crt_observacion\"></b-form-input>\n      </b-input-group>\n      <b-input-group prepend=\"CORTADO POR\">\n        <b-form-input class=\"text-right\" readonly :value=\"corte_selec.crt_quien_corta\"></b-form-input>\n      </b-input-group>\n      <b-input-group prepend=\"REGISTRADO POR\">\n        <b-form-input class=\"text-right\" readonly :value=\"corte_selec.crt_quien_registra\"></b-form-input>\n      </b-input-group>\n\n      <h5 class=\"mt-3\">CORTES/PUNTAS</h5>\n      <b-card v-for=\"(punta,index) in corte_selec.puntas\" :key=\"'pnt'+index\">\n        <h6 class=\"mb-3\">CORTE {{index+1}}</h6>\n        <div class=\"row\">\n          <div class=\"col-4\">\n            <b-input-group size=\"sm\" prepend=\"PUNTA 1\">\n              <b-form-input class=\"text-right\" readonly :value=\"punta.pnt_punta1\"></b-form-input>\n            </b-input-group>\n          </div>\n          <div class=\"col-4\">\n            <b-input-group size=\"sm\" prepend=\"PUNTA 2\">\n              <b-form-input class=\"text-right\" readonly :value=\"punta.pnt_punta2\"></b-form-input>\n            </b-input-group>\n          </div>\n          <div class=\"col-4\">\n            <b-input-group size=\"sm\" prepend=\"METROS\">\n              <b-form-input class=\"text-right\" readonly :value=\"punta.pnt_metros\"></b-form-input>\n            </b-input-group>\n          </div>\n        </div>\n        \n      </b-card>\n\n      <div class=\"row mt-3 pt-3 border-top\">\n        <div class=\"col text-center\">\n          <b-button variant=\"primary\">IMPRIMIR ETIQUETA</b-button>\n        </div>\n      </div>\n\n    </b-modal>\n\n  </div>\n</template>\n\n<script>\nexport default {\n  data(){\n    return{\n      columnas: [\n        { key: 'crt_fecha_hora'     , label: 'FECHA-HORA'   , sortable: true,   tdClass:'p-1', thClass:'p-1' },\n        { key: 'crt_documento'      , label: 'N° DOC'       , sortable: true,   tdClass:'p-1', thClass:'p-1' },\n        { key: 'crt_tipo_documento' , label: 'DOC'          , sortable: true,   tdClass:'p-1', thClass:'p-1' },\n        { key: 'crt_cliente'        , label: 'CLIENTE'      , sortable: true,   tdClass:'p-1', thClass:'p-1' },\n        { key: 'crt_tipo_cable'     , label: 'CABLE'        , sortable: true,   tdClass:'p-1', thClass:'p-1' },\n        { key: 'crt_observacion'    , label: 'OBSERVACION'  , tdClass:'p-1', thClass:'p-1' },\n        { key: 'opciones'           , label: '-'            , tdClass:'p-1', thClass:'p-1' }\n      ],\n      meses : [\n        {value:1, text:'ENERO'},\n        {value:2, text:'FEBRERO'},\n        {value:3, text:'MARZO'},\n        {value:4, text:'ABRIL'},\n        {value:5, text:'MAYO'},\n        {value:6, text:'JUNIO'},\n        {value:7, text:'JULIO'},\n        {value:8, text:'AGOSTO'},\n        {value:9, text:'SEPTIEMBRE'},\n        {value:10, text:'OCTUBRE'},\n        {value:11, text:'NOVIEMBRE'},\n        {value:12, text:'DICIEMBRE'}\n      ],\n      mes             : 1,\n      anos            : [],\n      ano             : 2023,\n      cortes          : [],\n      filtro          : '',\n      modal_detalle   : false,\n      corte_selec     : '',\n      cargando_pagina : false\n    }\n  },\n  mounted(){\n    const fecha = new Date();\n    this.ano    = fecha.getFullYear();\n    this.mes    = fecha.getMonth() + 1; \n    this.listarAnos();\n  },\n  methods:{\n    listarCortes(){\n      this.cargando_pagina = true;\n      var data = new URLSearchParams();\n      data.append('mes', this.mes);\n      data.append('ano', this.ano);\n      axios.post(base_url+'cables/listarCortes', data).then( resp => {\n        this.cortes           = resp.data.cortes;\n        this.cargando_pagina  = false;\n      }).catch(error =>{\n        console.log(error);\n        this.cargando_pagina = false;\n      });\n    },\n\n    listarAnos(){\n      this.cargando_pagina = true;\n      axios.post(base_url+'cables/listarAnos').then( resp => {\n        this.anos      = resp.data.anos;\n        if(this.anos.length == 0){\n          this.anos = [2023];\n        }\n        this.listarCortes();\n      }).catch(error =>{\n        console.log(error);\n        this.cargando_pagina = false;\n      });\n    },\n  }\n}\n\n</script>\n\n<style scoped>\n\n</style>\n"]}]}